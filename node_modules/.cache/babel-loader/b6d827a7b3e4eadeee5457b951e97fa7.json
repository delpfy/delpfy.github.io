{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\cubar\\\\source\\\\react\\\\delpfy.github.io\\\\src\\\\pages\\\\Home.tsx\",\n    _s = $RefreshSig$();\n\nimport React from \"react\"; // import qs from \"qs\";\n// import { useNavigate } from \"react-router-dom\";\n\nimport { useSelector } from \"react-redux\";\nimport { Catigories, SortPopUp, Skeleton, PizzaBlock } from \"../components\";\nimport Pagination from \"../Pagination\";\nimport { setCategoryId, setCurrentPage } from \"../redux/filter/slice\"; // import { options } from \"../components/Main/Sort\";\n\nimport { FetchPizzas } from \"../redux/pizza/asyncActions\";\nimport { useAppDispatch } from \"../redux/store\";\nimport { selectFilter } from \"../redux/filter/selectors\";\nimport { selectPizzasData } from \"../redux/pizza/selectors\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Home = () => {\n  _s();\n\n  const dispatch = useAppDispatch(); // const navigate = useNavigate();\n\n  const isSearch = React.useRef(false); // const isMounted = React.useRef(false);\n\n  const {\n    items,\n    status\n  } = useSelector(selectPizzasData);\n  const {\n    categoryId,\n    sort,\n    currentPage,\n    searchValue\n  } = useSelector(selectFilter);\n\n  const setPage = page => {\n    dispatch(setCurrentPage(page));\n  };\n\n  const setCategory = index => {\n    dispatch(setCategoryId(index));\n  };\n\n  const GetPizzas = async () => {\n    const order = sort.sortProperty.includes(\"-\") ? \"asc\" : \"desc\";\n    const category = categoryId > 0 ? `&category=${categoryId}` : \"\";\n    const sortBy = sort.sortProperty.replace(\"-\", \"\");\n    const search = searchValue ? `&search=${searchValue}` : \"\";\n    dispatch(FetchPizzas({\n      order,\n      category,\n      sortBy,\n      currentPage: String(currentPage),\n      search\n    }));\n  };\n  /* React.useEffect(() => {\r\n    if (window.location.search) {\r\n      const params =qs.parse(window.location.search.substring(1)) as unknown as SearchPizzaParams;\r\n        const sort = options.find(\r\n        (obj) => obj.sortProperty === params.sortBy\r\n      );\r\n      dispatch(setFilters({\r\n        searchValue: params.search,\r\n        categoryId: Number(params.category),\r\n        currentPage: Number(params.currentPage),\r\n        sort: sort || options[0],\r\n      }));\r\n        isMounted.current = true;\r\n    }\r\n  }, []); */\n\n\n  React.useEffect(() => {\n    window.scrollTo(0, 0);\n    GetPizzas();\n  }, [categoryId, sort.sortProperty, isSearch.current, currentPage, searchValue]);\n  /* React.useEffect(() => {\r\n    if (isMounted.current) {\r\n      const params = {\r\n        currentPage,\r\n        categoryId: categoryId > 0 ? categoryId : null,\r\n        sortProperty: sort.sortProperty,\r\n      };\r\n      const queryString = qs.stringify(params, { skipNulls: true });\r\n      navigate(`/?${queryString}`);\r\n    }\r\n    if (!window.location.search) {\r\n      dispatch(FetchPizzas({} as SearchPizzaParams));\r\n    }\r\n  }, [categoryId, sort.sortProperty, currentPage, searchValue]); */\n\n  const skeletons = [...new Array(6)].map((_, index) => /*#__PURE__*/_jsxDEV(Skeleton, {}, index, false, {\n    fileName: _jsxFileName,\n    lineNumber: 95,\n    columnNumber: 5\n  }, this));\n  const pizzas = items.map(item => /*#__PURE__*/_jsxDEV(PizzaBlock, { ...item\n  }, item.id, false, {\n    fileName: _jsxFileName,\n    lineNumber: 98,\n    columnNumber: 5\n  }, this));\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"content__top\",\n      children: [/*#__PURE__*/_jsxDEV(Catigories, {\n        value: categoryId,\n        setCategory: setCategory\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(SortPopUp, {\n        sort: sort\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"content__title\",\n      children: \"\\u0423\\u0441\\u0456 \\u043F\\u0456\\u0446\\u0438\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 7\n    }, this), status === \"error\" ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"content__error-info\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\u0421\\u0442\\u0430\\u043B\\u0430\\u0441\\u044F \\u043F\\u043E\\u043C\\u0438\\u043B\\u043A\\u0430 \\uD83D\\uDE15\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"\\u041D\\u0435 \\u0432\\u0434\\u0430\\u043B\\u043E\\u0441\\u044F \\u043E\\u0442\\u0440\\u0438\\u043C\\u0430\\u0442\\u0438 \\u043F\\u0456\\u0446\\u0438. \\u041F\\u0435\\u0440\\u0435\\u0432\\u0456\\u0440\\u0442\\u0435 \\u0432\\u0430\\u0448\\u0435 \\u043F\\u0456\\u0434\\u043A\\u043B\\u044E\\u0447\\u0435\\u043D\\u043D\\u044F \\u0434\\u043E \\u0456\\u043D\\u0442\\u0435\\u0440\\u043D\\u0435\\u0442\\u0443 \\u0442\\u0430 \\u0441\\u043F\\u0440\\u043E\\u0431\\u0443\\u0439\\u0442\\u0435 \\u0437\\u043D\\u043E\\u0432\\u0443!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"content__items\",\n      children: status === \"loading\" ? skeletons : pizzas\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Pagination, {\n      currentPage: currentPage,\n      onChangePage: setPage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 102,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Home, \"51AA/2rMiocNLFzt0MGSHLwuqzk=\", false, function () {\n  return [useAppDispatch, useSelector, useSelector];\n});\n\n_c = Home;\nexport default Home;\n\nvar _c;\n\n$RefreshReg$(_c, \"Home\");","map":{"version":3,"names":["React","useSelector","Catigories","SortPopUp","Skeleton","PizzaBlock","Pagination","setCategoryId","setCurrentPage","FetchPizzas","useAppDispatch","selectFilter","selectPizzasData","Home","dispatch","isSearch","useRef","items","status","categoryId","sort","currentPage","searchValue","setPage","page","setCategory","index","GetPizzas","order","sortProperty","includes","category","sortBy","replace","search","String","useEffect","window","scrollTo","current","skeletons","Array","map","_","pizzas","item","id"],"sources":["C:/Users/cubar/source/react/delpfy.github.io/src/pages/Home.tsx"],"sourcesContent":["import React from \"react\";\r\n\r\n// import qs from \"qs\";\r\n\r\n// import { useNavigate } from \"react-router-dom\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { Catigories, SortPopUp, Skeleton, PizzaBlock } from \"../components\";\r\nimport Pagination from \"../Pagination\";\r\nimport {setCategoryId,setCurrentPage} from \"../redux/filter/slice\";\r\n\r\n// import { options } from \"../components/Main/Sort\";\r\n\r\nimport {FetchPizzas} from \"../redux/pizza/asyncActions\";\r\nimport { useAppDispatch } from \"../redux/store\";\r\nimport { selectFilter } from \"../redux/filter/selectors\";\r\nimport { selectPizzasData } from \"../redux/pizza/selectors\";\r\n\r\nconst Home: React.FC = () => {\r\n  const dispatch = useAppDispatch();\r\n // const navigate = useNavigate();\r\n  const isSearch = React.useRef(false);\r\n // const isMounted = React.useRef(false);\r\n  const { items, status } = useSelector(selectPizzasData);\r\n  const { categoryId, sort, currentPage, searchValue } =\r\n    useSelector(selectFilter);\r\n\r\n  const setPage = (page: number) => {\r\n    dispatch(setCurrentPage(page));\r\n  };\r\n  const setCategory = (index: number) => {\r\n    dispatch(setCategoryId(index));\r\n  };\r\n\r\n  const GetPizzas = async () => {\r\n    const order = sort.sortProperty.includes(\"-\") ? \"asc\" : \"desc\";\r\n    const category = categoryId > 0 ? `&category=${categoryId}` : \"\";\r\n    const sortBy = sort.sortProperty.replace(\"-\", \"\");\r\n    const search = searchValue ? `&search=${searchValue}` : \"\";\r\n\r\n    dispatch(\r\n      FetchPizzas({\r\n        order,\r\n        category,\r\n        sortBy,\r\n        currentPage: String(currentPage),\r\n        search,\r\n      })\r\n    );\r\n  };\r\n  /* React.useEffect(() => {\r\n    if (window.location.search) {\r\n      const params =qs.parse(window.location.search.substring(1)) as unknown as SearchPizzaParams;\r\n\r\n      const sort = options.find(\r\n        (obj) => obj.sortProperty === params.sortBy\r\n      );\r\n      dispatch(setFilters({\r\n        searchValue: params.search,\r\n        categoryId: Number(params.category),\r\n        currentPage: Number(params.currentPage),\r\n        sort: sort || options[0],\r\n      }));\r\n\r\n      isMounted.current = true;\r\n    }\r\n  }, []); */\r\n\r\n  React.useEffect(() => {\r\n    window.scrollTo(0, 0);\r\n    GetPizzas();\r\n  }, [\r\n    categoryId,\r\n    sort.sortProperty,\r\n    isSearch.current,\r\n    currentPage,\r\n    searchValue,\r\n  ]);\r\n\r\n  /* React.useEffect(() => {\r\n    if (isMounted.current) {\r\n      const params = {\r\n        currentPage,\r\n        categoryId: categoryId > 0 ? categoryId : null,\r\n        sortProperty: sort.sortProperty,\r\n      };\r\n      const queryString = qs.stringify(params, { skipNulls: true });\r\n      navigate(`/?${queryString}`);\r\n    }\r\n    if (!window.location.search) {\r\n      dispatch(FetchPizzas({} as SearchPizzaParams));\r\n    }\r\n  }, [categoryId, sort.sortProperty, currentPage, searchValue]); */\r\n\r\n  const skeletons = [...new Array(6)].map((_, index) => (\r\n    <Skeleton key={index} />\r\n  ));\r\n  const pizzas = items.map((item: any) => (\r\n    <PizzaBlock key={item.id} {...item} />\r\n  ));\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <div className=\"content__top\">\r\n        <Catigories value={categoryId} setCategory={setCategory} />\r\n        <SortPopUp sort={sort}/>\r\n      </div>\r\n      <h2 className=\"content__title\">Усі піци</h2>\r\n      {status === \"error\" ? (\r\n        <div className=\"content__error-info\">\r\n          <h2>Сталася помилка 😕</h2>\r\n          <p>Не вдалося отримати піци. Перевірте ваше підключення до інтернету та спробуйте знову!</p>\r\n        </div>\r\n      ) : (\r\n        <div className=\"content__items\">\r\n          {status === \"loading\" ? skeletons : pizzas}\r\n        </div>\r\n      )}\r\n      <Pagination currentPage={currentPage} onChangePage={setPage} />\r\n    </div>\r\n  );\r\n};\r\nexport default Home;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}